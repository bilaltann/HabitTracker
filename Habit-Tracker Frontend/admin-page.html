<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Yönetici Paneli | HabitQuest</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="toast.css">

    <style>
        .tab-content {
            display: none;
            animation: fadeIn 0.4s ease;
        }

            .tab-content.active {
                display: block;
            }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .admin-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 8px;
            margin-top: 15px;
        }

            .admin-table th {
                text-align: left;
                padding: 15px;
                color: #666;
                font-size: 13px;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }

            .admin-table td {
                background: rgba(255,255,255,0.7);
                padding: 15px;
                vertical-align: middle;
                border-bottom: 1px solid rgba(0,0,0,0.03);
                font-size: 14px;
            }

            .admin-table tr:hover td {
                background: #fff;
                transform: scale(1.002);
                box-shadow: 0 2px 10px rgba(0,0,0,0.05);
                transition: 0.2s;
            }

            .admin-table tr td:first-child {
                border-top-left-radius: 10px;
                border-bottom-left-radius: 10px;
            }

            .admin-table tr td:last-child {
                border-top-right-radius: 10px;
                border-bottom-right-radius: 10px;
            }

        .avatar-circle {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #e0e7ff;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 13px;
            margin-right: 10px;
        }

        .badge {
            padding: 5px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            white-space: nowrap;
        }

        .badge-success {
            background: #dcfce7;
            color: #166534;
        }

        .badge-warning {
            background: #fef9c3;
            color: #854d0e;
        }

        .badge-danger {
            background: #fee2e2;
            color: #991b1b;
        }

        .friendship-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .friendship-card {
            background: rgba(255,255,255,0.7);
            padding: 15px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: 1px solid transparent;
            transition: 0.2s;
        }

            .friendship-card:hover {
                background: #fff;
                border-color: #e5e7eb;
                box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            }

        .btn-icon {
            width: 30px;
            height: 30px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: 0.2s;
            margin-left: 5px;
        }

        .btn-edit {
            background: #eff6ff;
            color: #2563eb;
        }

        .btn-delete {
            background: #fef2f2;
            color: #dc2626;
        }

        .btn-icon:hover {
            filter: brightness(0.9);
            transform: translateY(-1px);
        }

       

        
        .dashboard-widgets {
            display: grid;
            grid-template-columns: 2fr 1fr; 
            gap: 20px;
            margin-top: 20px;
        }

        @media (max-width: 900px) {
            .dashboard-widgets {
                grid-template-columns: 1fr;
            }
            
        }

        .widget-box {
            padding: 20px;
            min-height: 300px;
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            padding-bottom: 10px;
        }

            .widget-header h3 {
                margin: 0;
                font-size: 16px;
                color: #333;
            }

        /* Aktivite Listesi */
        .activity-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(0,0,0,0.03);
        }

            .activity-item:last-child {
                border-bottom: none;
            }

        .act-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-right: 15px;
            flex-shrink: 0;
        }
        /* Renk sınıfları */
        .bg-blue {
            background: #3b82f6;
        }

        .bg-green {
            background: #10b981;
        }

        .bg-orange {
            background: #f59e0b;
        }

        .act-details h4 {
            margin: 0;
            font-size: 14px;
            color: #333;
            font-weight: 500;
        }

        .act-details p {
            margin: 2px 0 0;
            font-size: 12px;
            color: #666;
        }

        .act-time {
            margin-left: auto;
            font-size: 11px;
            color: #999;
        }

        /* Sistem Durumu Barları */
        .system-status-item {
            margin-bottom: 20px;
        }

        .status-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 13px;
            font-weight: 500;
            color: #555;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-color);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
        }

        .status-ok {
            background: #dcfce7;
            color: #166534;
        }

        .status-err {
            background: #fee2e2;
            color: #991b1b;
        }

        .status-gray {
            background: #f3f4f6;
            color: #6b7280;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #999;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
    </style>
</head>
<body>

    <header class="glass-header">
        <div class="header-content">
            <div class="logo-container">
                <span class="material-icons" style="color: var(--primary-color); font-size: 28px;">admin_panel_settings</span>
                <div style="display:flex; flex-direction:column; margin-left:10px;">
                    <span style="font-weight:700; color:#333; font-size:16px;">Yönetim Paneli</span>
                </div>
            </div>
            <button class="btn-logout" id="logout-btn">
                <span class="material-icons" style="font-size: 18px;">logout</span> Çıkış
            </button>
        </div>
    </header>

    <div class="container">
        <aside class="sidebar glass-panel">
            <h4 style="margin:0 0 15px 10px; color:#999; font-size:11px; text-transform:uppercase; letter-spacing:1px;">Genel</h4>

            <div class="nav-item active" onclick="switchTab('dashboard', this)">
                <span class="material-icons">dashboard</span> <span>Özet Durum</span>
            </div>

            <h4 style="margin:25px 0 15px 10px; color:#999; font-size:11px; text-transform:uppercase; letter-spacing:1px;">Kayıtlar</h4>

            <div class="nav-item" onclick="switchTab('users', this)">
                <span class="material-icons">group</span> <span>Kullanıcı Listesi</span>
            </div>

            <div class="nav-item" onclick="switchTab('friendships', this)">
                <span class="material-icons">diversity_3</span> <span>Arkadaşlıklar</span>
            </div>

            <h4 style="margin:25px 0 15px 10px; color:#999; font-size:11px; text-transform:uppercase; letter-spacing:1px;">Sistem</h4>

            <div class="nav-item" onclick="switchTab('settings', this)">
                <span class="material-icons">settings</span> <span>Ayarlar</span>
            </div>
        </aside>

        <main class="content-area">

            <section id="tab-dashboard" class="tab-content active">

                <div class="stats-grid">
                    <div class="stat-card glass-panel">
                        <div class="stat-icon purple"><span class="material-icons">people</span></div>
                        <div>
                            <h2 style="margin:0;" id="stat-total-users">-</h2>
                            <span style="color:#666; font-size:13px;">Toplam Üye</span>
                        </div>
                    </div>
                    <div class="stat-card blue">
                        <div class="stat-icon" style="background:rgba(255,255,255,0.2)"><span class="material-icons">handshake</span></div>
                        <div style="color:white;">
                            <h2 style="margin:0;" id="stat-total-friendships">-</h2>
                            <span style="font-size:13px; opacity:0.9;">Arkadaşlık Bağı</span>
                        </div>
                    </div>
                    <div class="stat-card glass-panel">
                        <div class="stat-icon purple" style="background: linear-gradient(135deg, #10B981, #059669);"><span class="material-icons">check_circle</span></div>
                        <div>
                            <h2 style="margin:0;" id="stat-total-habits">-</h2>
                            <span style="color:#666; font-size:13px;">Alışkanlıklar</span>
                        </div>
                    </div>
                </div>

                <div class="dashboard-widgets">

                    <div class="glass-panel widget-box">
                        <div class="widget-header">
                            <h3>Son Sistem Hareketleri</h3>
                            <button class="btn-icon" onclick="loadActivities()" title="Yenile"><span class="material-icons">refresh</span></button>
                        </div>

                        <div id="activity-list" class="activity-list">
                            <div class="empty-state">
                                <span class="material-icons">hourglass_empty</span>
                                <p>Aktivite verileri bekleniyor...</p>
                            </div>
                        </div>
                    </div>

                    <div class="glass-panel widget-box">
                        <div class="widget-header">
                            <h3>Sunucu Durumu</h3>
                        </div>

                        <div class="system-status-item">
                            <div class="status-info">
                                <span>İşlemci (CPU)</span>
                                <span class="status-value" id="cpu-val">-%</span>
                            </div>
                            <div class="progress-bar"><div class="progress-fill" style="width: 0%" id="cpu-bar"></div></div>
                        </div>

                        <div class="system-status-item">
                            <div class="status-info">
                                <span>Bellek (RAM)</span>
                                <span class="status-value" id="ram-val">-%</span>
                            </div>
                            <div class="progress-bar"><div class="progress-fill" style="width: 0%" id="ram-bar"></div></div>
                        </div>

                        <div class="system-status-item" style="margin-top:20px; border-top:1px solid #eee; padding-top:15px;">
                            <div class="status-info">
                                <span>Veritabanı Bağlantısı</span>
                                <span class="status-badge status-gray" id="db-status">Kontrol Ediliyor...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="tab-users" class="tab-content">
                <div class="glass-panel">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <h3>Kullanıcılar</h3>
                        <button class="btn-primary" onclick="loadUsers()">
                            <span class="material-icons" style="font-size:16px; vertical-align:middle;">refresh</span>
                        </button>
                    </div>

                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Kullanıcı</th>
                                <th>E-posta</th>
                                <th>Rol</th>
                                <th>Durum</th>
                                <th style="text-align:right;">İşlemler</th>
                            </tr>
                        </thead>
                        <tbody id="user-list-container">
                            <tr><td colspan="5" style="text-align:center; padding:20px;">Veriler bekleniyor...</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="tab-friendships" class="tab-content">
                <div class="glass-panel">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <h3>Arkadaşlık Bağlantıları</h3>
                        <button class="btn-primary" onclick="loadFriendships()">
                            <span class="material-icons" style="font-size:16px; vertical-align:middle;">refresh</span>
                        </button>
                    </div>

                    <div id="friendship-list-container" class="friendship-grid">
                        <div style="grid-column:1/-1; text-align:center; padding:20px; color:#666;">Veriler bekleniyor...</div>
                    </div>
                </div>
            </section>

            <section id="tab-settings" class="tab-content">
                <div class="glass-panel" style="max-width:500px;">
                    <h3>Sistem Ayarları</h3>
                    <form id="admin-settings-form" style="margin-top:20px;">
                        <label style="display:block; font-weight:600; font-size:13px; margin-bottom:5px;">Site Başlığı</label>
                        <input type="text" id="site-title" class="form-control" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:8px; margin-bottom:15px;">

                        <label style="display:block; font-weight:600; font-size:13px; margin-bottom:5px;">Bakım Modu</label>
                        <select id="maintenance-mode" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:8px; margin-bottom:15px;">
                            <option value="false">Kapalı (Site Aktif)</option>
                            <option value="true">Açık (Bakım)</option>
                        </select>
                        <button type="submit" class="btn-primary" style="width:100%;">Kaydet</button>
                    </form>
                </div>
            </section>
        </main>
    </div>

    <script type="module" src="js/adminpage.js"></script>

</body>
</html>
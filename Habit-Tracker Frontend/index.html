<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HabitQuest - Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" />
     <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/locale/tr.js"></script> 
    <link rel="stylesheet" href="style.css">

</head>
<body>

    <div class="background-shape shape-1"></div>
    <div class="background-shape shape-2"></div>

    <header class="glass-header">
        <div class="header-content">
            <div class="logo-container">
                <img src="image/logo.png" alt="HabitQuest Logo" class="header-logo" onerror="this.style.display='none'">
                <h1 class="logo">HabitQuest</h1>
            </div>

            <div class="user-info">
                <span id="user-display">Hoş Geldiniz!</span>
                <button onclick="openFriendModal()" class="btn-friend-header">
                    <span class="material-icons">person_add</span> Arkadaş Ekle
                </button>
                <button id="logout-btn" class="btn-logout">
                    <span class="material-icons">logout</span> Çıkış
                </button>
            </div>
        </div>
    </header>

    <div class="main-layout container">
        <aside class="sidebar glass-panel">
            <nav>
                <ul>
                    <li class="nav-item active" data-page="home">
                        <span class="material-icons">dashboard</span> Anasayfa
                    </li>
                    <li class="nav-item" data-page="requests">
                        <span class="material-icons">notifications_active</span> İstekler
                    </li>
                    <li class="nav-item" data-page="friends">
                        <span class="material-icons">people</span> Arkadaşlar
                    </li>
                   
                    <li class="nav-item" data-page="badges">
                        <span class="material-icons">emoji_events</span> Rozetler
                    </li>
                    <li class="nav-item" data-page="calendar">
                        <span class="material-icons">calendar_today</span> Takvim
                    </li>
                    <li class="nav-item" data-page="settings">
                        <span class="material-icons">settings</span> Ayarlar
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="content-area">
            <!-- ANASAYFA -->
            <section id="page-home">
                <div class="stats-grid">
                    <div class="stat-card glass-panel">
                        <div class="stat-icon purple"><span class="material-icons">stars</span></div>
                        <div class="stat-info"><h3>Toplam Puan</h3><span id="user-points" class="stat-value">0</span></div>
                    </div>
                    <div class="stat-card glass-panel">
                        <div class="stat-icon blue"><span class="material-icons">verified</span></div>
                        <div class="stat-info" style="width: 100%;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <h3>Seviye</h3><span id="user-level-name" class="stat-value" style="font-size: 18px;">Başlangıç</span>
                            </div>
                            <div class="progress-container"><div id="level-progress-bar" class="progress-bar"></div></div>
                            <small id="progress-text" style="color: #666; font-size: 12px;">İlerleme Durumu: %0</small>
                        </div>
                    </div>
                </div>

                <div class="form-card glass-panel">
                    <div class="card-header"><h2><span class="material-icons">add_circle</span> Yeni Alışkanlık</h2></div>
                    <form id="add-habit-form" class="habit-form-grid">
                        <div class="input-group"><input type="text" id="habit-name" placeholder="Örn: Her gün 20 sayfa kitap oku" required></div>
                        <div class="input-group">
                            <select id="habit-category">
                                <option value="Kişisel Gelişim">Kişisel Gelişim</option>
                                <option value="Spor">Spor</option>
                                <option value="Sağlık">Sağlık</option>
                                <option value="Ders">Ders</option>
                                <option value="Diğer">Diğer</option>
                            </select>
                        </div>
                        <div class="radio-group">
                            <label class="radio-label"><input type="radio" name="frequency" value="0" checked><span>Günlük</span></label>
                            <label class="radio-label"><input type="radio" name="frequency" value="1"><span>Haftalık</span></label>
                        </div>
                        <button type="submit" class="btn-primary">Ekle</button>
                    </form>
                </div>

                <div class="list-card glass-panel">
                    <div class="card-header">
                        <h2><span class="material-icons">list_alt</span> Alışkanlıklarım</h2>
                    </div>

                    <div class="filter-container" style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 10px; margin-bottom: 20px; padding: 15px; background: rgba(255,255,255,0.5); border-radius: 12px; border: 1px solid rgba(255,255,255,0.8);">
                        <div style="position: relative;">
                            <span class="material-icons" style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #999; font-size: 20px;">search</span>
                            <input type="text" id="filter-search" placeholder="Alışkanlık ara..."
                                   style="width: 90%; padding: 10px 10px 10px 35px; border: 1px solid #ddd; border-radius: 8px; outline: none; font-size: 14px;">
                        </div>

                        <select id="filter-category" style="padding: 10px; border: 1px solid #ddd; border-radius: 8px; outline: none; background: white; cursor: pointer; font-size: 14px;">
                            <option value="all">Tüm Kategoriler</option>
                            <option value="Kişisel Gelişim">Kişisel Gelişim</option>
                            <option value="Spor">Spor</option>
                            <option value="Sağlık">Sağlık</option>
                            <option value="Ders">Ders</option>
                            <option value="Diğer">Diğer</option>
                        </select>

                        <select id="filter-frequency" style="padding: 10px; border: 1px solid #ddd; border-radius: 8px; outline: none; background: white; cursor: pointer; font-size: 14px;">
                            <option value="all">Tüm Sıklıklar</option>
                            <option value="Daily">Günlük</option>
                            <option value="Weekly">Haftalık</option>
                        </select>
                    </div>

                    <div id="habit-list" class="habit-list-container">
                        <p class="empty-message">Yükleniyor...</p>
                    </div>
                </div>
            </section>

            <!-- İSTEKLER -->
            <section id="page-requests" class="hidden">
                <div class="friends-grid-layout">
                    <div class="glass-panel">
                        <div class="card-header"><h2><span class="material-icons" style="color: #10B981;">move_to_inbox</span> Gelen İstekler</h2></div>
                        <div id="received-requests-list" style="margin-top: 15px;"><p class="empty-message">Yükleniyor...</p></div>
                    </div>
                    <div class="glass-panel">
                        <div class="card-header"><h2><span class="material-icons" style="color: #4F46E5;">outbox</span> Gönderilen İstekler</h2></div>
                        <div id="sent-requests-list" style="margin-top: 15px;"><p class="empty-message">Yükleniyor...</p></div>
                    </div>
                </div>
            </section>

            <!-- ARKADAŞLAR -->
            <section id="page-friends" class="hidden">
                <div class="glass-panel">
                    <div class="card-header"><h2><span class="material-icons" style="color: #F59E0B;">groups</span> Arkadaşlarım</h2></div>
                    <div id="active-friends-list" class="habit-list-container">
                        <p class="empty-message">Henüz arkadaşınız yok. "İstekler" menüsünden veya "Arkadaş Ekle" butonundan yeni arkadaşlar edinebilirsiniz.</p>
                    </div>
                </div>
            </section>

            <!-- DİĞERLERİ -->
            <section id="page-badges" class="hidden"><div class="glass-panel"><h2>Rozet Koleksiyonu</h2><div id="badges-content-area-main" class="badge-grid-tabs"></div></div></section>

            <section id="page-calendar" class="hidden">
                <div class="glass-panel">
                    <div class="card-header">
                        <h2><span class="material-icons" style="color: #EC4899;">calendar_month</span> Alışkanlık Takvimi</h2>
                    </div>
                    <div id="calendar" style="background: white; padding: 15px; border-radius: 10px; min-height: 500px;"></div>
                </div>
            </section>


            <section id="page-settings" class="hidden">

                <div>

                    <h2 style="color: var(--text-color); display:flex; align-items:center; gap:10px;">
                        <span class="material-icons">settings</span> Hesap Ayarları
                    </h2>

                    <div class="glass-panel" style="margin-bottom: 25px;">
                        <h3 style="color: #4F46E5; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <span class="material-icons">lock</span> Şifre Güncelleme
                        </h3>

                        <form id="change-password-form">
                            <div class="input-group" style="margin-bottom: 15px;">
                                <label style="font-size: 13px; color: #666; margin-bottom: 5px; display: block;">Mevcut Şifre</label>
                                <input type="password" id="current-password" placeholder="••••••" required
                                       style="width: 50%; padding: 12px; border: 1px solid #A9A9A9; border-radius: 8px; outline: none; background-color: #f9fafb; ">
                            </div>

                            <div class="input-group" style="margin-bottom: 20px;">
                                <label style="font-size: 13px; color: #666; margin-bottom: 5px; display: block;">Yeni Şifre</label>
                                <input type="password" id="new-password" placeholder="En az 8 karakter" required minlength="8"
                                       style="width: 50%; border: 1px solid #A9A9A9; border-radius: 8px; outline: none; background-color: #f9fafb; ">
                            </div>

                            <button type="submit" class="btn-primary" style="padding: 10px 20px;">Şifreyi Değiştir</button>
                        </form>
                    </div>

                    <div class="glass-panel" >
                        <h3 style="color: #4F46E5; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <span class="material-icons">email</span> E-posta Güncelleme
                        </h3>

                        <form id="update-email-form">

                            <div class="input-group" style="margin-bottom: 15px;">
                                <label style="font-size: 13px; color: #666; margin-bottom: 5px; display: block;">Mevcut E-posta Adresi</label>
                                <input type="email" id="current-email-input" placeholder="Mevcut e-postanızı giriniz" required
                                       style="width: 50%; padding: 12px; border: 1px solid #A9A9A9; border-radius: 8px; outline: none; background-color: #f9fafb;">
                            </div>

                            <div class="input-group" style="margin-bottom: 20px;">
                                <label style="font-size: 13px; color: #666; margin-bottom: 5px; display: block;">Yeni E-posta Adresi</label>
                                <input type="email" id="new-email-input" placeholder="Yeni e-posta giriniz" required
                                       style="width: 50%; padding: 12px; border: 1px solid #A9A9A9; border-radius: 8px; outline: none; background-color: #f9fafb; ">
                            </div>

                            <button type="submit" class="btn-primary" style="padding: 10px 20px;">E-postayı Değiştir</button>
                        </form>
                    </div>

                </div>
            </section>
        </main>
    </div>

    <!-- MODAL: ALIŞKANLIK DÜZENLEME -->
    <div class="modal-overlay" id="edit-modal">
        <div class="modal-content glass-panel">
            <span class="material-icons close-modal" onclick="closeEditModal()">close</span>
            <h2 style="text-align:center; margin-bottom:20px; color:#4F46E5;">Düzenle</h2>
            <form id="edit-habit-form">
                <input type="hidden" id="edit-habit-id">
                <div class="input-group" style="margin-bottom: 15px;">
                    <label style="font-size:12px; color:#666;">Alışkanlık Adı</label>
                    <input type="text" id="edit-habit-name" required style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd; margin-top:5px;">
                </div>
                <div class="input-group" style="margin-bottom: 15px;">
                    <label style="font-size:12px; color:#666;">Kategori</label>
                    <select id="edit-habit-category" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd; margin-top:5px;">
                        <option value="Kişisel Gelişim">Kişisel Gelişim</option>
                        <option value="Spor">Spor</option>
                        <option value="Sağlık">Sağlık</option>
                        <option value="Ders">Ders</option>
                        <option value="Diğer">Diğer</option>
                    </select>
                </div>
                <div class="radio-group" style="margin-bottom: 25px; display:flex; gap:15px;">
                    <label class="radio-label" style="display:flex; align-items:center; gap:5px; cursor:pointer;"><input type="radio" name="edit-frequency" value="0"><span>Günlük</span></label>
                    <label class="radio-label" style="display:flex; align-items:center; gap:5px; cursor:pointer;"><input type="radio" name="edit-frequency" value="1"><span>Haftalık</span></label>
                </div>
                <button type="submit" class="btn-primary" style="width: 100%; padding:12px;">Güncelle</button>
            </form>
        </div>
    </div>

    <!-- MODAL: ARKADAŞ EKLE -->
    <div class="modal-overlay" id="friend-modal">
        <div class="modal-content glass-panel" style="text-align: center;">
            <span class="material-icons close-modal" onclick="closeFriendModal()">close</span>
            <div style="width: 70px; height: 70px; background-color: #e0f2f1; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                <span class="material-icons" style="font-size: 35px; color: #10B981;">send</span>
            </div>
            <h2 style="margin-bottom: 10px; color: #10B981;">Arkadaş Ekle</h2>
            <p style="font-size: 14px; color: #666; margin-bottom: 25px;">Arkadaşının e-posta adresini girerek ona bir davet gönder.</p>
            <form id="send-friend-request-form">
                <div class="input-group" style="margin-bottom: 20px;">
                    <input type="email" id="friend-email" placeholder="arkadas@ornek.com" required style="width: 100%; padding: 15px; border-radius: 12px; border: 1px solid #ddd; text-align: center; font-size: 16px;">
                </div>
                <button type="submit" class="btn-primary" style="width: 100%; background-color: #10B981; font-size: 16px;">
                    <span class="material-icons" style="vertical-align: middle; font-size: 18px; margin-right: 5px;">email</span> Davet Gönder
                </button>
            </form>
        </div>
    </div>
    <!-- MODAL: SİLME ONAYI -->
    <div class="modal-overlay" id="delete-modal">
        <div class="modal-content glass-panel" style="text-align: center;">
            <!-- Kapatma ikonu -->
            <span class="material-icons close-modal" onclick="closeDeleteModal()">close</span>

            <!-- Uyarı İkonu -->
            <div style="width: 60px; height: 60px; background-color: #fee2e2; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px;">
                <span class="material-icons" style="font-size: 32px; color: #ef4444;">warning</span>
            </div>

            <h3 style="margin-bottom: 10px; color: #1f2937;">Emin misiniz?</h3>
            <p style="color: #666; font-size: 14px; margin-bottom: 25px;">
                Bu alışkanlığı silmek istediğinize emin misiniz?<br>Bu işlem geri alınamaz.
            </p>

            
            <input type="hidden" id="delete-habit-id-input">

            <div style="display: flex; gap: 10px; justify-content: center;">
                <button onclick="closeDeleteModal()" class="btn-cancel">Vazgeç</button>
                <button onclick="confirmDelete()" class="btn-delete-confirm">Evet, Sil</button>
            </div>
        </div>

    </div>
    <!--MODAL: GÜN DETAYI (Takvimde güne tıklayınca açılır) -->
    <div class="modal-overlay" id="day-detail-modal">
        <div class="modal-content glass-panel">
            <span class="material-icons close-modal" onclick="closeDayModal()">close</span>
            <h3 id="modal-date-title" style="text-align:center; color: var(--primary-color); margin-bottom: 15px;">Tarih Detayı</h3>

            <div id="day-habits-list" class="habit-list-container">
                <!-- O günün alışkanlıkları buraya JS ile dolacak -->
                <p>Yükleniyor...</p>
            </div>
        </div>
    </div>
    <!-- MODAL: GÜN DETAYI -->
    <div class="modal-overlay" id="day-detail-modal">
        <div class="modal-content glass-panel" style="max-width: 450px;">
            <span class="material-icons close-modal" onclick="closeDayModal()">close</span>

            <!-- Tarih Başlığı -->
            <div style="text-align: center; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 10px;">
                <h3 id="modal-date-title" style="color: #4F46E5; font-size: 20px;">Tarih</h3>
                <span style="font-size: 12px; color: #666;">Bugün yapılması gerekenler</span>
            </div>

            <!-- Alışkanlık Listesi -->
            <div id="day-habits-list" class="habit-list-container">
                <p style="text-align:center; color:#999;">Yükleniyor...</p>
            </div>

            <button onclick="closeDayModal()" class="btn-primary" style="width: 100%; margin-top: 15px; background-color: #6B7280;">Kapat</button>
        </div>
    </div>
    <div id="toast-container" style="position: fixed; top: 20px; right: 20px; z-index: 9999;"></div>
    <script type="module" src="js/main.js"></script>
</body>
</html>